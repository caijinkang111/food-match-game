<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ç¾é£ŸåŒ¹é…å¤§ä½œæˆ˜</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- æ–¹å‘æç¤ºï¼ˆåˆå§‹éšè—ï¼‰ -->
    <div id="orientation-hint" class="orientation-hint">
        <h2>ğŸ® æœ€ä½³æ¸¸æˆä½“éªŒæç¤º</h2>
        <p id="hint-text">æ¨ªå±æ¨¡å¼èƒ½è·å¾—æ›´å¥½çš„æ¸¸æˆè§†é‡ï¼</p>
        <button id="continue-btn" class="continue-btn">ç»§ç»­æ¸¸æˆ</button>
    </div>

    <div class="container">
        <!-- æ¸¸æˆæ ‡é¢˜æ  -->
        <div class="game-header">
            <h1>ç¾é£ŸåŒ¹é…å¤§ä½œæˆ˜</h1>
        </div>

        <!-- æ¸¸æˆç”»å¸ƒå®¹å™¨ -->
        <div class="canvas-container">
            <div id="loading-screen" class="loading-screen">
                <div class="spinner">
                    <div class="double-bounce1"></div>
                    <div class="double-bounce2"></div>
                </div>
                <div class="loading-text">
                    <p>åŠ è½½æ¸¸æˆä¸­...</p>
                    <div class="progress-bar">
                        <div id="loading-progress" class="progress-fill"></div>
                    </div>
                    <p id="loading-percentage">0%</p>
                </div>
            </div>
            <canvas id="game-canvas"></canvas>
        </div>

        <!-- æ¸¸æˆæ§åˆ¶æŒ‰é’® -->
        <div class="game-controls">
            <button id="start-btn" class="btn btn-primary">
                å¼€å§‹æ¸¸æˆ
            </button>
            <button id="restart-btn" class="btn btn-secondary" disabled>
                é‡æ–°å¼€å§‹
            </button>
        </div>
    </div>

    <script src="game.js"></script>
    <script>
        // æ–¹å‘æç¤ºé€»è¾‘
        document.addEventListener('DOMContentLoaded', function() {
            const orientationHint = document.getElementById('orientation-hint');
            const hintText = document.getElementById('hint-text');
            const continueBtn = document.getElementById('continue-btn');
            
            // æ£€æµ‹æ˜¯å¦ç§»åŠ¨è®¾å¤‡
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            // æ˜¾ç¤ºæ–¹å‘æç¤ºçš„é€»è¾‘
            function checkOrientation() {
                if (!isMobile) return;
                
                const width = window.innerWidth;
                const height = window.innerHeight;
                const isPortrait = height > width;
                
                // æ ¹æ®å±å¹•æ¯”ä¾‹å†³å®šæ˜¯å¦æ˜¾ç¤ºæç¤º
                const aspectRatio = width / height;
                
                if (isPortrait && aspectRatio < 0.8) {
                    // éå¸¸ç«–å±çš„è®¾å¤‡
                    hintText.textContent = "æ£€æµ‹åˆ°ç«–å±æ¨¡å¼ï¼Œå»ºè®®å°†è®¾å¤‡æ¨ªç½®ä»¥è·å¾—æœ€ä½³æ¸¸æˆä½“éªŒï¼";
                    orientationHint.style.display = 'flex';
                } else if (!isPortrait && aspectRatio > 1.8) {
                    // éå¸¸å®½å±çš„è®¾å¤‡
                    hintText.textContent = "æ£€æµ‹åˆ°æ¨ªå±æ¨¡å¼ï¼Œæ¸¸æˆä½“éªŒæ›´ä½³ï¼";
                    orientationHint.style.display = 'flex';
                }
            }
            
            // ç»§ç»­æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            continueBtn.addEventListener('click', function() {
                orientationHint.style.display = 'none';
            });
            
            // åˆå§‹æ£€æµ‹
            setTimeout(checkOrientation, 1000);
            
            // æ–¹å‘å˜åŒ–æ—¶é‡æ–°æ£€æµ‹
            window.addEventListener('resize', checkOrientation);
            window.addEventListener('orientationchange', function() {
                setTimeout(checkOrientation, 500);
            });
        });
    </script>
</body>
</html>
